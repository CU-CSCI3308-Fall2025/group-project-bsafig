<div class="row">
  <!-- Left column: Profile info -->
  <div class="col-md-4 text-center">
    <div class="mb-3">
        <img
            src="{{#if user.profilePicUrl}}{{user.profilePicUrl}}{{else}}/images/default-profile.png{{/if}}"
            alt="{{user.username}}'s profile picture"
            class="img-fluid rounded-circle border"
            style="width: 150px; height: 150px; object-fit: cover;"
        />
    </div>

    <!-- Username -->
    <h2 class="fw-bold">{{user.username}}</h2>

    <!-- Friend count -->
    <p class="text-muted">
      <a href="/friends/{{user.id}}" class="text-decoration-none">
        {{user.friendCount}} friends
      </a>
    </p>

    <!-- Set a Status (only if viewing own profile) -->
    {{#if isOwnProfile}}
    <a href="/profile/status/create" class="btn btn-success btn-sm mt-2 me-2">
      Set Status
    </a>

    <!-- Edit profile button (only if viewing own profile) --> 
    <a href="/profile/settings" class="btn btn-outline-primary btn-sm mt-2">
      Settings
    </a>
    {{/if}}
  </div>

  <!-- Right column: Posts -->
  <div class="col-md-8">
    <h4 class="border-bottom pb-2 mb-3">Posts by {{user.username}}</h4>

    {{#if status}}
    <div class="card mb-3 bg-light border-success">
        <div class="card-body py-2">
            <h6 class="card-title text-success mb-1">
                <span class="me-2">ðŸŽµ</span> Listening To:
            </h6>
            <p class="card-text fw-bold mb-1">{{status.song_name}}</p>
            {{#if status.note}}
                <p class="card-text fst-italic text-muted">"{{status.note}}"</p>
            {{/if}}
        </div>
    </div>
    {{/if}}

    {{#if posts.length}}
      {{#each posts}}
        <div class="card mb-3">
          <div class="card-body">
            <p class="card-text">{{this.content}}</p>
            <small class="text-muted">
              Posted on {{this.createdAt}}
            </small>
          </div>
        </div>
      {{/each}}
    {{else}}
      <p class="text-muted">No posts yet.</p>
    {{/if}}
  </div>
</div>
